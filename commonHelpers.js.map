{"version":3,"file":"commonHelpers.js","sources":["../src/JS/pixabay-api.js","../src/JS/render-functions.js","../src/JS/btn-load.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst ENDPOINT = 'https://pixabay.com/api/';\nconst KEY = '33796051-1e422d07d8c9fc912bc2a7eb4';\nconst param =\n  'per_page=15&image_type=photo&orientation=horyzontal&safesearch=true';\n\n\n// export default function ImageApiService(search) {\n//   const URL = `${ENDPOINT}?key=${KEY}&q=${search}&${param}`;\n//   return fetch(URL).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// }\n\nexport default class ImageApiService {\n  constructor() {\n    this.page = 1;\n    this.search = '';\n  }\n  async getImage() {\n    const URL = `${ENDPOINT}?key=${KEY}&q=${this.search}&page=${this.page}&${param}`;\n    const response = await axios.get(URL);\n    this.nextPage();\n\n    return response.data;\n  }\n  nextPage() {\n    this.page += 1;\n  }\n  resetPage() {\n    this.page = 1;\n  }\n}\n","export default function createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<div class=\"photo-card\">\n  <a class = \"gallery__link\" href=\"${largeImageURL}\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes</b>\n      ${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views</b>\n      ${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments</b>\n      ${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads</b>\n      ${downloads}\n    </p>\n  </div>\n  </a>\n</div>`;\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n\n  show() {\n    this.button.classList.remove('hidden');\n  }\n\n  // disable() {\n  //   this.button.disabled = true;\n  // }\n  // // enable() {\n  // //   this.button.disabled = false;\n  // }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport ImageApiService from './JS/pixabay-api.js';\nimport createMarkup from './JS/render-functions.js';\nimport LoadMoreBtn from './JS/btn-load.js';\n\n\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\n\nconst imageApiService = new ImageApiService();\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '.load-more',\n  isHidden: true,\n});\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.button.addEventListener('click', fetchHits);\n\nfunction onSubmit(event) {\n  event.preventDefault();\n  const form = event.target;\n  const value = form.elements.searchQuery.value.trim();\n  imageApiService.search = value;\n  if (value === '') {\n        iziToast.info({\n          messageSize: '16px',\n          messageLineHeight: '24px',\n          messageColor: '#FFFFFF',\n          maxWidth: '432px',\n          backgroundColor: '#ca3535',\n          position: 'topRight',\n          titleSize: '24px',\n          message: 'Please formulate a request',\n        });\n        return;\n  }\n  imageApiService.resetPage();\n  clearList();\n  loadMoreBtn.show();\n  fetchHits().finally(() => form.reset());\n}\n\nasync function fetchHits() {\n  enabledLoader();\n  const data = await imageApiService.getImage();\n  const hits = data.hits;\n  const markup = hits.reduce((markup, hit) => createMarkup(hit) + markup, '');\n  try {\n    if (hits.length === 0) {\n      loader.classList.add('is-hidden');\n      iziToast.error({\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        maxWidth: '432px',\n        backgroundColor: '#ea1515',\n        position: 'topRight',\n        titleSize: '24px',\n        message: 'Nothing was found for your request. try again',\n      });\n      return;\n    } \n    if (hits.length < 15) {\n      loader.classList.add('is-hidden');\n      iziToast.info({\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        maxWidth: '432px',\n        backgroundColor: '#ff1515',\n        position: 'topRight',\n        titleSize: '24px',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      appendToList(markup);\n      return\n    } \n      appendToList(markup);\n      disabledLoader();\n      scrollLimitBtn();\n    \n  } catch (err) {\n    onError(err);\n  }\n}\n\nfunction appendToList(markup) {\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\n\nfunction clearList() {\n  gallery.innerHTML = '';\n}\n\nfunction enabledLoader() {\n  loader.classList.remove('is-hidden');\n  loadMoreBtn.hide();\n};\n\nfunction disabledLoader() {\n  loader.classList.add('is-hidden');\n  loadMoreBtn.show();\n};\n\nfunction onError(err) {\n  loader.classList.add('is-hidden');\n  loadMoreBtn.hide();\n  console.error(err);\n  \n}\n\nfunction scrollLimitBtn() {\n  const elem = gallery.firstChild;\n  const pixels = elem.getBoundingClientRect();\n  const valueScrl = pixels.height * 2;\nwindow.scrollBy({ top: valueScrl, behavior: 'smooth' });\n}\n\nconst lightbox = new SimpleLightbox('.gallery a');"],"names":["ENDPOINT","KEY","param","ImageApiService","URL","response","axios","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","LoadMoreBtn","selector","isHidden","form","gallery","loader","imageApiService","loadMoreBtn","onSubmit","fetchHits","event","value","iziToast","clearList","enabledLoader","hits","markup","hit","appendToList","disabledLoader","scrollLimitBtn","err","onError","lightbox","valueScrl","SimpleLightbox"],"mappings":"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"}