{"version":3,"file":"commonHelpers.js","sources":["../src/JS/pixabay-api.js","../src/JS/render-functions.js","../src/JS/btn-load.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst ENDPOINT = 'https://pixabay.com/api/';\nconst KEY = '33796051-1e422d07d8c9fc912bc2a7eb4';\nconst param =\n  'per_page=80&image_type=photo&orientation=horyzontal&safesearch=true';\n\n\n// export default function ImageApiService(search) {\n//   const URL = `${ENDPOINT}?key=${KEY}&q=${search}&${param}`;\n//   return fetch(URL).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// }\n\nexport default class ImageApiService {\n  constructor() {\n    this.page = 1;\n    this.search = '';\n  }\n  async getImage() {\n    const URL = `${ENDPOINT}?key=${KEY}&q=${this.search}&page=${this.page}&${param}`;\n    const response = await axios.get(URL);\n    this.nextPage();\n\n    return response.data;\n  }\n  nextPage() {\n    this.page += 1;\n  }\n  resetPage() {\n    this.page = 1;\n  }\n}\n","export default function createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<div class=\"photo-card\">\n  <a class = \"gallery__link\" href=\"${largeImageURL}\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes</b>\n      ${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views</b>\n      ${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments</b>\n      ${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads</b>\n      ${downloads}\n    </p>\n  </div>\n  </a>\n</div>`;\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n\n  show() {\n    this.button.classList.remove('hidden');\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading...';\n  }\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = 'Load more';\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport ImageApiService from './JS/pixabay-api.js';\nimport createMarkup from './JS/render-functions.js';\nimport LoadMoreBtn from './JS/btn-load.js';\n\n\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\n\nconst imageApiService = new ImageApiService();\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '.load-more',\n  isHidden: true,\n});\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.button.addEventListener('click', fetchHits);\n\nfunction onSubmit(event) {\n  event.preventDefault();\n  const form = event.target;\n  const value = form.elements.searchQuery.value.trim();\n  imageApiService.search = value;\n  if (value === '') {\n        iziToast.info({\n          messageSize: '16px',\n          messageLineHeight: '24px',\n          messageColor: '#FFFFFF',\n          maxWidth: '432px',\n          backgroundColor: 'red',\n          position: 'topRight',\n          titleSize: '24px',\n          message: 'Please formulate a request',\n        });\n        return;\n  }\n  imageApiService.resetPage();\n  clearList();\n  loadMoreBtn.show();\n  fetchHits().finally(() => form.reset());\n}\n\nasync function fetchHits() {\n  enabledLoader();\n  // loader.classList.remove('is-hidden');\n  // loadMoreBtn.disable();\n  // loadMoreBtn.hide();\n  try {\n    const data = await imageApiService.getImage();\n    const hits = data.hits;\n    if (hits.length === 0) {\n      loader.classList.add('is-hidden');\n      iziToast.info({\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        maxWidth: '432px',\n        backgroundColor: 'red',\n        position: 'topRight',\n        titleSize: '24px',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      \n      return\n    } else if (hits.length < 3) {\n      loader.classList.add('is-hidden');\n      iziToast.info({\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#FFFFFF',\n        maxWidth: '432px',\n        backgroundColor: 'red',\n        position: 'topRight',\n        titleSize: '24px',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n\n      return;\n    } else {\n      const markup = hits.reduce(\n        (markup, hit) => createMarkup(hit) + markup,\n        ''\n      );\n      appendToList(markup);\n      // loader.classList.add('is-hidden');\n      // loadMoreBtn.show();\n      // loadMoreBtn.enable();\n      disabledLoader();\n    };\n    \n  } catch (err) {\n    onError(err);\n  }\n}\n\nfunction appendToList(markup) {\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\n\nfunction clearList() {\n  gallery.innerHTML = '';\n}\n\n// function endSearchRes() {\n// if (data.hits.length < 50) {\n//   loader.classList.add('is-hidden');\n//   iziToast.info({\n//     messageSize: '16px',\n//     messageLineHeight: '24px',\n//     messageColor: '#FFFFFF',\n//     maxWidth: '432px',\n//     // backgroundColor: 'red',\n//     position: 'topRight',\n//     titleSize: '24px',\n//     message: \"We're sorry, but you've reached the end of search results.\",\n//   });\n\n//   return;\n// }\n// }\n\nfunction enabledLoader() {\n  loader.classList.remove('is-hidden');\n  loadMoreBtn.disable();\n  loadMoreBtn.hide();\n};\n\nfunction disabledLoader() {\n  loader.classList.add('is-hidden');\n  loadMoreBtn.show();\n  loadMoreBtn.enable();\n};\n\nfunction onError(err) {\n  loader.classList.add('is-hidden');\n  loadMoreBtn.hide();\n  console.error(err);\n  \n}\n\nconst lightbox = new SimpleLightbox('.gallery a');"],"names":["ENDPOINT","KEY","param","ImageApiService","URL","response","axios","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","LoadMoreBtn","selector","isHidden","form","gallery","loader","imageApiService","loadMoreBtn","onSubmit","fetchHits","event","value","iziToast","clearList","enabledLoader","hits","markup","hit","appendToList","disabledLoader","err","onError","lightbox","SimpleLightbox"],"mappings":"owBACA,MAAMA,EAAW,2BACXC,EAAM,qCACNC,EACJ,sEAaa,MAAMC,CAAgB,CACnC,aAAc,CACZ,KAAK,KAAO,EACZ,KAAK,OAAS,EACf,CACD,MAAM,UAAW,CACf,MAAMC,EAAM,GAAGJ,CAAQ,QAAQC,CAAG,MAAM,KAAK,MAAM,SAAS,KAAK,IAAI,IAAIC,CAAK,GACxEG,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,YAAK,SAAQ,EAENC,EAAS,IACjB,CACD,UAAW,CACT,KAAK,MAAQ,CACd,CACD,WAAY,CACV,KAAK,KAAO,CACb,CACH,CCnCe,SAASE,EAAa,CACnC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,qCAC4BL,CAAa;AAAA,cACpCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,QAIhCC,CAAK;AAAA;AAAA;AAAA;AAAA,QAILC,CAAK;AAAA;AAAA;AAAA;AAAA,QAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,QAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,OAKjB,CChCe,MAAMC,CAAY,CAC/B,YAAY,CAAE,SAAAC,EAAU,SAAAC,GAAY,CAClC,KAAK,OAAS,KAAK,UAAUD,CAAQ,EACjCC,EAAU,KAAK,OACd,KAAK,KAAI,CACf,CAED,UAAUD,EAAU,CAClB,OAAO,SAAS,cAAcA,CAAQ,CACvC,CAED,MAAO,CACL,KAAK,OAAO,UAAU,IAAI,QAAQ,CACnC,CAED,MAAO,CACL,KAAK,OAAO,UAAU,OAAO,QAAQ,CACtC,CAED,SAAU,CACR,KAAK,OAAO,SAAW,GACvB,KAAK,OAAO,YAAc,YAC3B,CACD,QAAS,CACP,KAAK,OAAO,SAAW,GACvB,KAAK,OAAO,YAAc,WAC3B,CACH,CCjBA,MAAME,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAGzCC,EAAkB,IAAIlB,EACtBmB,EAAc,IAAIP,EAAY,CAClC,SAAU,aACV,SAAU,EACZ,CAAC,EAEDG,EAAK,iBAAiB,SAAUK,CAAQ,EACxCD,EAAY,OAAO,iBAAiB,QAASE,CAAS,EAEtD,SAASD,EAASE,EAAO,CACvBA,EAAM,eAAc,EACpB,MAAMP,EAAOO,EAAM,OACbC,EAAQR,EAAK,SAAS,YAAY,MAAM,OAE9C,GADAG,EAAgB,OAASK,EACrBA,IAAU,GAAI,CACZC,EAAS,KAAK,CACZ,YAAa,OACb,kBAAmB,OACnB,aAAc,UACd,SAAU,QACV,gBAAiB,MACjB,SAAU,WACV,UAAW,OACX,QAAS,4BACnB,CAAS,EACD,MACL,CACDN,EAAgB,UAAS,EACzBO,IACAN,EAAY,KAAI,EAChBE,EAAW,EAAC,QAAQ,IAAMN,EAAK,MAAO,CAAA,CACxC,CAEA,eAAeM,GAAY,CACzBK,IAIA,GAAI,CAEF,MAAMC,GADO,MAAMT,EAAgB,YACjB,KAClB,GAAIS,EAAK,SAAW,EAAG,CACrBV,EAAO,UAAU,IAAI,WAAW,EAChCO,EAAS,KAAK,CACZ,YAAa,OACb,kBAAmB,OACnB,aAAc,UACd,SAAU,QACV,gBAAiB,MACjB,SAAU,WACV,UAAW,OACX,QACE,0EACV,CAAO,EAED,MACN,SAAeG,EAAK,OAAS,EAAG,CAC1BV,EAAO,UAAU,IAAI,WAAW,EAChCO,EAAS,KAAK,CACZ,YAAa,OACb,kBAAmB,OACnB,aAAc,UACd,SAAU,QACV,gBAAiB,MACjB,SAAU,WACV,UAAW,OACX,QAAS,4DACjB,CAAO,EAED,MACN,KAAW,CACL,MAAMI,EAASD,EAAK,OAClB,CAACC,EAAQC,IAAQzB,EAAayB,CAAG,EAAID,EACrC,EACR,EACME,EAAaF,CAAM,EAInBG,GACN,CAEG,OAAQC,EAAK,CACZC,EAAQD,CAAG,CACZ,CACH,CAEA,SAASF,EAAaF,EAAQ,CAC5BZ,EAAQ,mBAAmB,YAAaY,CAAM,EAC9CM,EAAS,QAAO,CAClB,CAGA,SAAST,GAAY,CACnBT,EAAQ,UAAY,EACtB,CAoBA,SAASU,GAAgB,CACvBT,EAAO,UAAU,OAAO,WAAW,EACnCE,EAAY,QAAO,EACnBA,EAAY,KAAI,CAClB,CAEA,SAASY,GAAiB,CACxBd,EAAO,UAAU,IAAI,WAAW,EAChCE,EAAY,KAAI,EAChBA,EAAY,OAAM,CACpB,CAEA,SAASc,EAAQD,EAAK,CACpBf,EAAO,UAAU,IAAI,WAAW,EAChCE,EAAY,KAAI,EAChB,QAAQ,MAAMa,CAAG,CAEnB,CAEA,MAAME,EAAW,IAAIC,EAAe,YAAY"}